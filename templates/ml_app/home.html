{% extends 'ml_app/base.html' %}

{% block title %}Accueil - ML Application{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-4 fw-bold" style="color: var(--primary-color);">
        <i class="fas fa-brain"></i> Bienvenue sur l'Application ML
    </h1>
    <p class="lead">Analysez et prédisez avec nos modèles de Machine Learning</p>
    {% if user.is_authenticated %}
        <p class="text-muted">
            Connecté en tant que <strong>{{ user.username }}</strong>
            {% if user.is_staff %}
                <span class="badge bg-warning">Administrateur</span>
            {% else %}
                <span class="badge bg-info">Utilisateur</span>
            {% endif %}
        </p>
    {% endif %}
</div>

<div class="row g-4">
    <!-- Clustering Card -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="fas fa-project-diagram"></i> Clustering des Jobs AI
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Analysez les tendances du marché mondial de l'IA et découvrez les clusters de jobs basés sur :
                </p>
                <ul>
                    <li>Salaires et rémunérations</li>
                    <li>Niveaux d'expérience requis</li>
                    <li>Localisations des entreprises</li>
                    <li>Tailles des entreprises</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:clustering_analysis' %}" class="btn btn-primary btn-lg">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:clustering_predict' %}" class="btn btn-outline-primary">
                            <i class="fas fa-search"></i> Prédire un Cluster
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-primary">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Global AI Job Market 2025</small>
            </div>
        </div>
    </div>

    <!-- Salary Prediction Card -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #27ae60, #229954);">
                <h3 class="mb-0">
                    <i class="fas fa-dollar-sign"></i> Prédiction de Salaire
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Prédisez les salaires en utilisant plusieurs modèles de régression basés sur :
                </p>
                <ul>
                    <li>Âge et années d'expérience</li>
                    <li>Niveau d'éducation</li>
                    <li>Titre du poste</li>
                    <li>Genre</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:salary_analysis' %}" class="btn btn-success btn-lg">
                            <i class="fas fa-chart-line"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:salary_predict' %}" class="btn btn-outline-success">
                            <i class="fas fa-calculator"></i> Estimer un Salaire
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-success">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Salary Data</small>
            </div>
        </div>
    </div>

    <!-- Platform Classification Card -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                <h3 class="mb-0">
                    <i class="fas fa-sitemap"></i> Classification des Plateformes
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Découvrez quelle plateforme de recrutement donnera la meilleure visibilité à votre job :
                </p>
                <ul>
                    <li>LinkedIn, BeBee, Jooble, etc.</li>
                    <li>Basé sur le type de poste</li>
                    <li>Localisation et entreprise</li>
                    <li>Caractéristiques du job</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:classification_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:classification_predict' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-magic"></i> Prédire une Plateforme
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Jobs Data</small>
            </div>
        </div>
    </div>

    <!-- Job Title Classification Card -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                <h3 class="mb-0">
                    <i class="fas fa-briefcase"></i> Classification des Types de Postes
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Prédisez le type de poste (Data Analyst, Data Scientist, Data Engineer, etc.) basé sur :
                </p>
                <ul>
                    <li>Type de contrat (Full-time, Part-time)</li>
                    <li>Secteur d'activité</li>
                    <li>Plateforme de recrutement</li>
                    <li>Nombre de compétences requises</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:job_title_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:job_title_predict' %}" class="btn btn-outline-danger">
                            <i class="fas fa-search"></i> Prédire un Type de Poste
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-danger">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Jobs Data</small>
            </div>
        </div>
    </div>

    <!-- Time Series Forecast Card -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                <h3 class="mb-0">
                    <i class="fas fa-chart-line"></i> Prévisions Temporelles
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Prédisez le nombre d'offres d'emploi pour les prochains mois avec une analyse temporelle avancée :
                </p>
                <ul>
                    <li>Décomposition STL (Tendance + Saisonnalité)</li>
                    <li>Moyenne mobile (SMA) et modèles statistiques</li>
                    <li>Prédictions de 1 à 12 mois</li>
                    <li>Précision : MAPE ≈ 1.8% (Excellent)</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:forecast_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:forecast_predict' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-crystal-ball"></i> Prédire les Prochains Mois
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Jobs Final Data</small>
            </div>
        </div>
    </div>

    <!-- Experience Prediction Card (NEW) -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                <h3 class="mb-0">
                    <i class="fas fa-user-clock"></i> Prédiction d'Expérience
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Estimez les années d'expérience requises basées sur les caractéristiques du poste :
                </p>
                <ul>
                    <li>Industrie et niveau d'éducation</li>
                    <li>Compétences requises</li>
                    <li>Type d'emploi et taille d'entreprise</li>
                    <li>Modèles: Linear, Random Forest, Gradient Boosting, SVR</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:experience_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:experience_predict' %}" class="btn btn-outline-danger">
                            <i class="fas fa-graduation-cap"></i> Estimer l'Expérience
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-danger">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Full HR Dataset</small>
            </div>
        </div>
    </div>

    <!-- Employee Clustering Card (NEW) -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                <h3 class="mb-0">
                    <i class="fas fa-users-cog"></i> Profils d'Employés
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Classifiez automatiquement les employés en profils Junior ou Senior :
                </p>
                <ul>
                    <li>Basé sur salaire et années d'expérience</li>
                    <li>Score des avantages et télétravail</li>
                    <li>Clustering: KMeans, Agglomerative, DBSCAN</li>
                    <li>Visualisations détaillées des profils</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:employee_clustering_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:employee_clustering_predict' %}" class="btn btn-outline-info">
                            <i class="fas fa-user-tag"></i> Déterminer le Profil
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-info">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous pour prédire
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Full HR Dataset</small>
            </div>
        </div>
    </div>

    <!-- Company Profiling Card (DS1) -->
    <div class="col-md-4">
        <div class="card h-100 border-0 shadow-lg">
            <div class="card-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                <h3 class="mb-0">
                    <i class="fas fa-building"></i> Segmentation Entreprises
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Segmentez les entreprises selon leur profil et adoption IA:
                </p>
                <ul>
                    <li>Clustering K-Means (4 segments)</li>
                    <li>Analyse par secteur, taille et IA</li>
                    <li>Visualisation PCA des segments</li>
                    <li>Profiling complet des clusters</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:company_profiling_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:company_profiling_predict' %}" class="btn btn-outline-primary">
                            <i class="fas fa-building"></i> Identifier le Segment
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-primary">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: AI Jobs Dataset</small>
            </div>
        </div>
    </div>

    <!-- Job Skill Clustering Card -->
    <div class="col-md-4">
        <div class="card h-100 border-0 shadow-lg">
            <div class="card-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                <h3 class="mb-0">
                    <i class="fas fa-brain"></i> Clustering par Compétences
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Clustering basé sur les compétences techniques (skills) des jobs:
                </p>
                <ul>
                    <li>3 profils identifiés: Business/BI, Data Engineer, Data Scientist</li>
                    <li>Analyse PCA et K-means (k=3)</li>
                    <li>Top compétences par cluster</li>
                    <li>Distribution des titres de jobs</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:job_skill_clustering_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:job_skill_clustering_predict' %}" class="btn btn-outline-info">
                            <i class="fas fa-magic"></i> Identifier mon Profil
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: Processed Job Skills</small>
            </div>
        </div>
    </div>

    <!-- Job Analysis Card (DS2) -->
    <div class="col-md-4">
        <div class="card h-100 border-0 shadow-lg">
            <div class="card-header" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                <h3 class="mb-0">
                    <i class="fas fa-briefcase"></i> Analyse Emplois
                </h3>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Régression de salaires et classification de profils IA:
                </p>
                <ul>
                    <li>Prédiction salaires: Linear + Random Forest</li>
                    <li>Classification profil IA (High/Low)</li>
                    <li>Analyse d'importance des features</li>
                    <li>Métriques complètes (R², Accuracy)</li>
                </ul>
                <div class="d-grid gap-2">
                    {% if user.is_staff %}
                        <a href="{% url 'ml_app:job_analysis_analysis' %}" class="btn btn-lg" style="background: linear-gradient(135deg, #fa709a, #fee140); color: white;">
                            <i class="fas fa-chart-bar"></i> Voir l'Analyse
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'ml_app:job_analysis_predict_ai_profile' %}" class="btn btn-outline-info">
                            <i class="fas fa-robot"></i> Classifier Profil IA
                        </a>
                    {% else %}
                        <a href="{% url 'ml_app:login' %}" class="btn btn-outline-warning">
                            <i class="fas fa-sign-in-alt"></i> Connectez-vous
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer text-muted">
                <small><i class="fas fa-database"></i> Dataset: AI Jobs Dataset</small>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                <h3 class="mb-0">
                    <i class="fas fa-info-circle"></i> À propos de cette application
                </h3>
            </div>
            <div class="card-body">
                <!-- Technologies -->
                <div class="mb-4">
                    <h5 class="border-bottom pb-2"><i class="fas fa-cogs text-primary"></i> Technologies utilisées</h5>
                    <div class="row mt-3">
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fab fa-python fa-2x text-success me-3"></i>
                                <div>
                                    <strong>Django</strong><br>
                                    <small class="text-muted">Framework web Python</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-brain fa-2x text-info me-3"></i>
                                <div>
                                    <strong>Scikit-learn</strong><br>
                                    <small class="text-muted">Machine Learning</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-table fa-2x text-warning me-3"></i>
                                <div>
                                    <strong>Pandas & NumPy</strong><br>
                                    <small class="text-muted">Traitement des données</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-chart-line fa-2x text-danger me-3"></i>
                                <div>
                                    <strong>Matplotlib & Seaborn</strong><br>
                                    <small class="text-muted">Visualisations</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fab fa-bootstrap fa-2x text-purple me-3"></i>
                                <div>
                                    <strong>Bootstrap 5</strong><br>
                                    <small class="text-muted">Interface utilisateur</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-database fa-2x text-secondary me-3"></i>
                                <div>
                                    <strong>SQLite</strong><br>
                                    <small class="text-muted">Base de données</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modèles ML -->
                <div class="mt-4">
                    <h5 class="border-bottom pb-2"><i class="fas fa-robot text-success"></i> Modèles ML disponibles</h5>
                    <div class="row mt-3">
                        <div class="col-md-3 mb-3">
                            <div class="card bg-light h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-primary"><i class="fas fa-project-diagram"></i> Clustering</h6>
                                    <ul class="list-unstyled small mb-0">
                                        <li>• K-means</li>
                                        <li>• Agglomerative</li>
                                        <li>• DBSCAN</li>
                                        <li>• Gaussian Mixture</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-light h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-success"><i class="fas fa-chart-line"></i> Régression</h6>
                                    <ul class="list-unstyled small mb-0">
                                        <li>• Linear & Polynomial</li>
                                        <li>• Decision Tree</li>
                                        <li>• Random Forest</li>
                                        <li>• Gradient Boosting</li>
                                        <li>• SVR</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-light h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-info"><i class="fas fa-tags"></i> Classification</h6>
                                    <ul class="list-unstyled small mb-0">
                                        <li>• KNN & SVM</li>
                                        <li>• Decision Tree</li>
                                        <li>• Random Forest</li>
                                        <li>• XGBoost</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-light h-100">
                                <div class="card-body">
                                    <h6 class="card-title text-warning"><i class="fas fa-calendar-alt"></i> Séries Temporelles</h6>
                                    <ul class="list-unstyled small mb-0">
                                        <li>• STL Decomposition</li>
                                        <li>• SMA + Saisonnalité</li>
                                        <li>• Holt-Winters</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-4">
        <div class="stats-card text-center">
            <i class="fas fa-project-diagram fa-3x mb-2"></i>
            <h3>9</h3>
            <p>Modules ML</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
            <i class="fas fa-brain fa-3x mb-2"></i>
            <h3>30+</h3>
            <p>Modèles ML</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
            <i class="fas fa-chart-bar fa-3x mb-2"></i>
            <h3>30+</h3>
            <p>Visualisations</p>
        </div>
    </div>
</div>
{% endblock %}
